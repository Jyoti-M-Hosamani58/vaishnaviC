
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Datatables - Kaiadmin Bootstrap 5 Admin Dashboard</title>
    <meta
            content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
            name="viewport"
    />
    <link
            rel="icon"
            href="{% static 'assets/img/kaiadmin/favicon.ico' %}"
            type="image/x-icon"
    />
     <title>Consignment</title>
    <style>
        #map {
            width: 100%;
            height: 400px;
        }
    </style>

    <!-- Fonts and icons -->
    <script src="{% static 'assets/js/plugin/webfont/webfont.min.js' %}"></script>
    <script>
        WebFont.load({
          google: { families: ["Public Sans:300,400,500,600,700"] },
          custom: {
            families: [
              "Font Awesome 5 Solid",
              "Font Awesome 5 Regular",
              "Font Awesome 5 Brands",
              "simple-line-icons",
            ],
            urls: ["{% static 'assets/css/fonts.min.css' %}"],
          },
          active: function () {
            sessionStorage.fonts = true;
          },
        });
    </script>
 <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&display=swap" rel="stylesheet" />

    <!-- CSS Files -->
    <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'assets/css/plugins.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'assets/css/kaiadmin.min.css' %}"/>

    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link rel="stylesheet" href="{% static 'assets/css/demo.css' %}"/>
</head>
<body>
{% include 'index_menu.html' %}
<!-- End Navbar -->
</div>

    <!-- Form to enter phone number -->
        <form method="GET" action="{% url 'admintrack_driver' %}">
             <div class="row">
              <div class="col-md-12">
                <div class="card">
                  <div class="card-header">
                    <div class="card-title">Track Driver</div>
                  </div>
                  <div class="card-body">
                    <div class="row">
                        <h1>Trcak Driver</h1>
                      <div class="col-md-6 col-lg-4">
                        <div class="form-group">
            <label for="phone_number">Enter Phone Number: </label>
            <input type="text" id="phone_number" name="phone_number" class="form-control" required>
                        </div>
                      </div>
                                            </div>
<div class="card-action">
            <button type="submit"  class="btn btn-success">Track Driver</button>
                        </div>
                    </div>
                </div>
                </div>

        </form>
    </div>
<div class="row">
              <div class="col-md-12">
                <div class="card">
                  <div class="card-header">
                    <h4 class="card-title">Information</h4>
                  </div>
                  <div class="card-body">
                    <div class="table-responsive">

    <h1>Track Driver: {{ driver.name }}</h1>

    {% if location %}
        <p>Last known location:</p>
        <p>Latitude: {{ location.latitude }}</p>
        <p>Longitude: {{ location.longitude }}</p>
        <p>Timestamp: {{ location.timestamp }}</p>
    {% else %}
        <p>No location data available.</p>
    {% endif %}

    <div id="map"></div>
</div>
                  </div>
                </div>
              </div>

        </div>


      </div>

    <script>
        // Initialize the Google Map
        function initMap() {
            // Use the driver's location if available, otherwise default to a location
            {% if location %}
                const driverLocation = { lat: {{ location.latitude }}, lng: {{ location.longitude }} };
            {% else %}
                const driverLocation = { lat: 0, lng: 0 };  // Default location if no location available
            {% endif %}

            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 14,
                center: driverLocation,
            });

            const marker = new google.maps.Marker({
                position: driverLocation,
                map: map,
                title: "{{ driver.name }}'s Location"
            });
        }

        // Load the map asynchronously using the Google Maps API
        window.onload = initMap;
    </script>

    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAeBgx9JJAK5Zl_HyvFl7_pAXNqU-bYe_U&callback=initMap">
    </script>

</div>
    <!--   Core JS Files   -->
    <script src="{% static 'assets/js/core/jquery-3.7.1.min.js' %}"></script>
    <script src="{% static 'assets/js/core/popper.min.js' %}"></script>
    <script src="{% static 'assets/js/core/bootstrap.min.js' %}"></script>

    <!-- jQuery Scrollbar -->
    <script src="{% static 'assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js' %}"></script>

    <!-- Chart JS -->
    <script src="{% static 'assets/js/plugin/chart.js/chart.min.js' %}"></script>

    <!-- jQuery Sparkline -->
    <script src="{% static 'assets/js/plugin/jquery.sparkline/jquery.sparkline.min.js' %}"></script>

    <!-- Chart Circle -->
    <script src="{% static 'assets/js/plugin/chart-circle/circles.min.js' %}"></script>

    <!-- Datatables -->
    <script src="{% static 'assets/js/plugin/datatables/datatables.min.js' %}"></script>

    <!-- Bootstrap Notify -->
    <script src="{% static 'assets/js/plugin/bootstrap-notify/bootstrap-notify.min.js' %}"></script>

    <!-- jQuery Vector Maps -->
    <script src="{% static 'assets/js/plugin/jsvectormap/jsvectormap.min.js' %}"></script>
    <script src="{% static 'assets/js/plugin/jsvectormap/world.js' %}"></script>

    <!-- Google Maps Plugin -->
    <script src="{% static 'assets/js/plugin/gmaps/gmaps.js' %}"></script>

    <!-- Sweet Alert -->
    <script src="{% static 'assets/js/plugin/sweetalert/sweetalert.min.js' %}"></script>

    <!-- Kaiadmin JS -->
    <script src="{% static 'assets/js/kaiadmin.min.js' %}"></script>

    <!-- Kaiadmin DEMO methods, don't include it in your project! -->
    <script src="{% static 'assets/js/setting-demo2.js' %}"></script>
  </body>
</html>

